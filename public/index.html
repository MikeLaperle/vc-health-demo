<!DOCTYPE html>
<html>
<head>
  <title>Credential Demo Hub</title>
  <style>
    body { font-family: Arial, sans-serif; padding: 40px; background:#f5f5f5; }
    h2 { margin-bottom: 20px; }
    select, button { margin: 10px 0; padding: 8px; }
    .links { margin-top: 30px; }
    .links a {
      display: block;
      margin: 8px 0;
      padding: 10px;
      background: #005DAA;
      color: #fff;
      text-decoration: none;
      border-radius: 4px;
      width: 320px;
    }
    .links a:hover { background: #003f73; }
  </style>
</head>
<body>
  <h2>Credential Demo Hub</h2>

  <label for="userSelect">Choose demo user:</label>
  <select id="userSelect"></select>
  <button onclick="setUser()">Set Active User</button>

  <div class="links">
    <h3>Credential Issuance Pages</h3>
    <a href="/unitedhealth/index.html" target="_blank">UnitedHealth Employee Credential</a>
    <a href="/florida-license/index.html" target="_blank">Florida Medical License</a>
    <a href="/johns-hopkins/index.html" target="_blank">Johns Hopkins Medical Doctor</a>
    <a href="/ama/index.html" target="_blank">AMA Membership Credential</a>
    <a href="/cms/index.html" target="_blank">CMS Provider Credential</a>
    <a href="/adventhealth/index.html" target="_blank">AdventHealth Surgical Privileges</a>
    <!-- Later you can add the meta credential here -->
  </div>

  <script>
  async function loadUsers() {
    try {
      const res = await fetch('/users.json');
      if (!res.ok) throw new Error("HTTP " + res.status);
      const users = await res.json();
      const select = document.getElementById('userSelect');
      users.forEach(u => {
        const opt = document.createElement('option');
        opt.value = u.id;
        opt.textContent = u.displayName;
        select.appendChild(opt);
      });
    } catch (err) {
      console.error("Failed to load users:", err);
    }
  }

  async function setUser() {
    const userId = document.getElementById('userSelect').value;
    await fetch('/api/setUser/' + userId, { method: 'POST' });
    alert("Active user set to " + userId);
  }

  loadUsers();
</script>
</body>
</html>